(function(){var n,k,p;n=angular.element;k=angular.module("validator.directive",["validator.provider"]);p=function(k){return{restrict:"A",require:"ngModel",link:function(l,b,c){var d,a,e,h,f,g,m,q;d=k.get("$validator");e=k.get("$parse")(c.ngModel);f=[];g=function(d,a){var g,h,q,k,m;h=0;m=[];q=0;for(k=f.length;q<k;q++){g=f[q];switch(d){case "blur":if("blur"!==g.invoke)continue;g.enableError=!0;break;case "watch":if("watch"!==g.invoke&&!g.enableError)continue;break;case "broadcast":g.enableError=!0}e.assign(l,
g.filter(e(l)));m.push(g.validator(e(l),l,b,c,{success:function(){if(++h===f.length)return g.success(l,b,c),null!=a?a.success():void 0},error:function(){g.enableError&&g.error(l,b,c);if(1===(null!=a?a.error():void 0))return window.jQuery?jQuery("html, body").animate({scrollTop:jQuery(b).offset().top-100},500):b[0].scrollIntoViewIfNeeded()}}))}return m};if(a=c.validator.match(/^\/(.*)\/$/))h=d.convertRule("dynamic",{validator:RegExp(a[1]),invoke:c.validatorInvoke,error:c.validatorError}),f.push(h);
if(a=c.validator.match(/^\[(.*)\]$/))for(a=a[1].split(","),m=0,q=a.length;m<q;m++)h=a[m],(h=d.getRule(h.trim()))&&f.push(h);l.$on(d.broadcastChannel.prepare,function(a,b){if(!b.model||0===c.ngModel.indexOf(b.model))return b.accept()});l.$on(d.broadcastChannel.start,function(b,a){if(!a.model||0===c.ngModel.indexOf(a.model))return g("broadcast",{success:a.success,error:a.error})});l.$watch(c.ngModel,function(a,b){if(a!==b)return g("watch")});return n(b).bind("blur",function(){return l.$apply(function(){return g("blur")})})}}};
p.$inject=["$injector"];k.directive("validator",p)}).call(this);(function(){angular.module("validator",["validator.provider","validator.directive"])}).call(this);
(function(){var n;n=angular.element;angular.module("validator.provider",[]).provider("$validator",function(){var k,p,r,l=this;r=p=k=null;this.rules={};this.broadcastChannel={prepare:"$validatePrepare",start:"$validateStart"};this.setupProviders=function(b){k=b;p=k.get("$q");return r=k.get("$timeout")};this.convertError=function(b){var c;if("function"===typeof b)return b;c=b.constructor===String?b:"";return function(b,a){var e;for(e=n(a).parent();0!==e.length;){if(e.hasClass("form-group")){if(e.hasClass("has-error"))break;
n(a).parent().append("<label class='control-label error'>"+c+"</label>");e.addClass("has-error");break}e=e.parent()}}};this.convertSuccess=function(b){return"function"===typeof b?b:function(b,d){var a,e,h,f,g;a=n(d).parent();for(g=[];0!==a.length;){if(a.hasClass("has-error")){a.removeClass("has-error");f=a.find("label");e=0;for(h=f.length;e<h;e++)if(a=f[e],n(a).hasClass("error")){a.remove();break}break}g.push(a=a.parent())}return g}};this.convertValidator=function(b){var c;c=function(){};b.constructor===
RegExp?c=function(c,a,e,h,f){return b.test(c)?"function"===typeof f.success?f.success():void 0:"function"===typeof f.error?f.error():void 0}:"function"===typeof b&&(c=function(c,a,e,h,f){return p.all([b(c,a,e,h,k)]).then(function(a){return a&&0<a.length&&a[0]?"function"===typeof f.success?f.success():void 0:"function"===typeof f.error?f.error():void 0})});return c};this.convertRule=function(b,c){var d;null==c&&(c={});d={name:b,enableError:"watch"===c.invoke,invoke:c.invoke,filter:c.filter,validator:c.validator,
error:c.error,success:c.success};null==d.filter&&(d.filter=function(a){return a});null==d.validator&&(d.validator=function(){return!0});null==d.error&&(d.error="");d.error=l.convertError(d.error);d.success=l.convertSuccess(d.success);d.validator=l.convertValidator(d.validator);return d};this.register=function(b,c){null==c&&(c={});return this.rules[b]=this.convertRule(b,c)};this.getRule=function(b){return this.rules[b]?this.rules[b]:null};this.validate=function(b,c){var d,a,e,h,f,g,m;m=p.defer().promise;
f=h=e=0;d=[];a=[];m.success=function(a){d.push(a);return m};m.error=function(b){a.push(b);return m};g={model:c,accept:function(){return e++},success:function(){var a,b,c;if(++h===e)for(b=0,c=d.length;b<c;b++)a=d[b],a()},error:function(){var b,c,d;if(0===f++)for(c=0,d=a.length;c<d;c++)b=a[c],b();return f}};b.$broadcast(l.broadcastChannel.prepare,g);r(function(){var a;a=k.get("$validator");return b.$broadcast(a.broadcastChannel.start,g)});return m};this.get=function(b){this.setupProviders(b);return{rules:this.rules,
broadcastChannel:this.broadcastChannel,convertRule:this.convertRule,getRule:this.getRule,validate:this.validate}};this.get.$inject=["$injector"];return this.$get=this.get})}).call(this);
